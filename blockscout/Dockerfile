FROM puppeth/blockscout:latest
ADD ../genesis.json /genesis.json
RUN   echo 'geth --cache 512 init /genesis.json' > explorer.sh &&   echo $'geth --networkid 234666 --syncmode "full" --gcmode "archive" --port 30305 --bootnodes enode://96ffe79f161207161d080df5f3793bdfadf1c8c9bbf93937975081160fdb123bb0943e49b4ca8010ca310bb89613bff76002dbe583468142f4d238bed2ff9f9d@128.199.80.145:30303 --ethstats \'node3expl:98GonHWOfRE5BkGfsN1TPgopB7gIjEd3uoqvRz1OUkaTRUmKRxnEVsJl7cCt@128.199.80.145:8080\' --cache=512 --http --http.api "net,web3,eth,debug,txpool" --http.corsdomain "*" --http.vhosts "*" --ws --ws.origins "*" --exitwhensynced' >> explorer.sh &&   echo $'exec geth --networkid 234666 --syncmode "full" --gcmode "archive" --port 30305 --bootnodes enode://96ffe79f161207161d080df5f3793bdfadf1c8c9bbf93937975081160fdb123bb0943e49b4ca8010ca310bb89613bff76002dbe583468142f4d238bed2ff9f9d@128.199.80.145:30303 --ethstats \'node3expl:98GonHWOfRE5BkGfsN1TPgopB7gIjEd3uoqvRz1OUkaTRUmKRxnEVsJl7cCt@128.199.80.145:8080\' --cache=512 --http --http.api "net,web3,eth,debug,txpool" --http.corsdomain "*" --http.vhosts "*" --ws --ws.origins "*" &' >> explorer.sh &&   echo '/usr/local/bin/docker-entrypoint.sh postgres &' >> explorer.sh &&   echo 'sleep 5' >> explorer.sh &&   echo 'mix do ecto.drop --force, ecto.create, ecto.migrate' >> explorer.sh &&   echo 'mix phx.server' >> explorer.sh
ENTRYPOINT ["/bin/sh", "explorer.sh"]